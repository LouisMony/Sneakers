{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { http } from \"../assets/js/http-common.js\";\nexport default {\n  name: 'ProfilView',\n\n  data() {\n    return {\n      credits: localStorage.getItem('credit'),\n      collection_size: 0,\n      chaussure: [],\n      searchvalue: '',\n      description: localStorage.getItem('description')\n    };\n  },\n\n  watch: {\n    searchvalue: function (val, oldVal) {\n      const cards = document.querySelectorAll('.card');\n      const cardsArr = Array.from(cards);\n\n      if (val !== '') {\n        val = val.toLowerCase();\n        cardsArr.forEach(item => {\n          var name = item.querySelector('h2').textContent.toLowerCase();\n\n          if (name.includes(val)) {\n            item.style.display = \"flex\";\n          } else {\n            item.style.display = \"none\";\n          }\n        });\n      } else {\n        cardsArr.forEach(item => {\n          item.style.display = \"flex\";\n        });\n      }\n    }\n  },\n\n  async mounted() {\n    await this.getCollection();\n    const progressbar = document.getElementById(\"personal_jauge\");\n    var progress_width = Math.round(this.collection_size / 1836 * 100);\n    progressbar.style.width = progress_width + \"%\";\n  },\n\n  methods: {\n    disconnect() {\n      localStorage.clear();\n      this.$router.replace('/login');\n    },\n\n    Search: function (event) {\n      console.log(event.target.value);\n    },\n\n    async ToggleState(id, state) {\n      var new_state = true;\n\n      if (state === true) {\n        new_state = false;\n      }\n\n      console.log(id, state);\n      await http.put('collections/' + id + '', {\n        \"data\": {\n          Vente: new_state\n        }\n      }, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token') + ''\n        }\n      });\n      this.getCollection();\n    },\n\n    async ToggleEchange(id, state) {\n      var new_state = true;\n\n      if (state === true) {\n        new_state = false;\n      }\n\n      console.log(id, state);\n      await http.put('collections/' + id + '', {\n        \"data\": {\n          dispo_echange: new_state\n        }\n      }, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token') + ''\n        }\n      });\n      this.getCollection();\n    },\n\n    async getCollection() {\n      var userChaussure = [];\n      await http.get('collections?filters[proprietaire][$eq]=' + localStorage.getItem('username') + '', {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token') + ''\n        }\n      }).then(function (res) {\n        res.data.data.forEach(item => {\n          var name = item.attributes.Name;\n          var image = item.attributes.Image;\n          var prix = item.attributes.Price;\n          var rarity = item.attributes.Rarete;\n          var echange = item.attributes.dispo_echange;\n          var vente = item.attributes.Vente;\n          userChaussure.push({\n            Name: name,\n            Image: image,\n            Price: prix,\n            Vente: vente,\n            ID: item.id,\n            Rarete: rarity,\n            Echange: echange\n          });\n        });\n      });\n      this.collection_size = res.data.meta.pagination.total;\n      userChaussure.sort(function (a, b) {\n        return b.Price - a.Price;\n      });\n      this.chaussure = userChaussure;\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAqCA;AAEA;EACAA,kBADA;;EAGAC;IACA;MACAC,uCADA;MAEAC,kBAFA;MAGAC,aAHA;MAIAC,eAJA;MAKAC;IALA;EAOA,CAXA;;EAYAC;IACAF;MACA;MACA;;MACA;QACAG;QACAC;UACA;;UACA;YACAC;UACA,CAFA,MAGA;YACAA;UACA;QACA,CARA;MASA,CAXA,MAWA;QACAD;UACAC;QACA,CAFA;MAGA;IACA;EApBA,CAZA;;EAmCA;IACA;IACA;IACA;IACAC;EACA,CAxCA;;EAyCAC;IACAC;MACAC;MACA;IACA,CAJA;;IAKAC;MACAC;IACA,CAPA;;IAQA;MACA;;MACA;QAAAC;MAAA;;MAEAD;MACA,yCACA;QACA;UACAE;QADA;MADA,CADA,EAMA;QACAC;UACAC,eACA;QAFA;MADA,CANA;MAYA;IACA,CA1BA;;IA2BA;MACA;;MACA;QAAAH;MAAA;;MAEAD;MACA,yCACA;QACA;UACAK;QADA;MADA,CADA,EAMA;QACAF;UACAC,eACA;QAFA;MADA,CANA;MAYA;IACA,CA7CA;;IA+CA;MACA;MACA;QACAD;UACAC,eACA;QAFA;MADA,GAMAE,IANA,CAMA;QACAC;UACA;UACA;UACA;UACA;UACA;UACA;UACAC;YAAAC;YAAAC;YAAAC;YAAAT;YAAAU;YAAAC;YAAAC;UAAA;QACA,CARA;MASA,CAhBA;MAiBA;MACAN;QACA;MACA,CAFA;MAGA;IACA;;EAvEA;AAzCA","names":["name","data","credits","collection_size","chaussure","searchvalue","description","watch","val","cardsArr","item","progressbar","methods","disconnect","localStorage","Search","console","new_state","Vente","headers","Authorization","dispo_echange","then","res","userChaussure","Name","Image","Price","ID","Rarete","Echange"],"sourceRoot":"src/views","sources":["ProfilView.vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"profil\">\n            <div class=\"profil_top\">\n                <h1>COLLECTION</h1>\n                <input type=\"text\" placeholder=\"Rechercher un modèle ...\"  v-model=\"searchvalue\">\n            </div>\n            \n            <div class=\"info\">\n                <div>{{description}}</div>\n                <div class=\"jauge_collection\">\n                    <span>Modèle possédé : {{collection_size}} / 1836</span>\n                    <div class=\"global_jauge\">\n                        <div id=\"personal_jauge\" class=\"personal_jauge\"></div>\n                    </div>\n\n                </div>\n            </div>\n            <div class=\"display_card\" >\n                <div class=\"card\" v-for=\"rang in chaussure\" :key=\"rang\">\n                    <img :src=\"'https://'+rang.Image\">\n                    <h2>{{rang.Name}}</h2>\n                    <span class=\"span_prix\">Estimation: {{rang.Price}} $</span>\n                    <span class=\"span_rarete\">Rareté : {{rang.Rarete}}</span>\n                    <button class=\"button\" v-on:click=\"ToggleState(rang.ID, rang.Vente)\" v-if=\"rang.Vente === false\">Vendre</button>\n                    <button class=\"button__off\" v-on:click=\"ToggleState(rang.ID, rang.Vente)\" v-else>Stopper la vente</button>\n\n                    <button class=\"button__third\" v-on:click=\"ToggleEchange(rang.ID, rang.Echange)\" v-if=\"rang.Echange === true\">Echanges autorisés ✔️</button>\n                    <button class=\"button__off\" v-on:click=\"ToggleEchange(rang.ID, rang.Echange)\" v-else>Echanges non autorisés ❌</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport {http} from \"../assets/js/http-common.js\"\n\nexport default {\n  name: 'ProfilView',\n\n    data(){\n        return{\n            credits: localStorage.getItem('credit'),\n            collection_size : 0,\n            chaussure: [],\n            searchvalue:'',\n            description: localStorage.getItem('description')\n        }\n    },\n    watch: {\n        searchvalue: function(val, oldVal) {\n            const cards = document.querySelectorAll('.card')\n            const cardsArr = Array.from(cards);\n            if(val !== ''){\n                val = val.toLowerCase()\n                cardsArr.forEach(item => {\n                    var name =item.querySelector('h2').textContent.toLowerCase();\n                    if(name.includes(val)){\n                        item.style.display = \"flex\"\n                    }\n                    else{\n                        item.style.display = \"none\"\n                    }\n                })\n            }else{\n                cardsArr.forEach(item => {\n                    item.style.display = \"flex\"\n                })\n            }\n        }\n    },\n    \n    async mounted(){\n        await this.getCollection()\n        const progressbar = document.getElementById(\"personal_jauge\")\n        var progress_width = Math.round((this.collection_size / 1836)*100)\n        progressbar.style.width = progress_width+\"%\"\n    },\n    methods:{\n        disconnect() {\n            localStorage.clear();\n            this.$router.replace('/login')\n        },\n        Search: function(event){\n            console.log(event.target.value)\n        },\n        async ToggleState(id, state){\n            var new_state = true\n            if(state === true){new_state = false}\n\n            console.log(id, state);\n            await http.put('collections/'+id+'', \n            {\n                \"data\":{\n                    Vente: new_state,\n                }\n            },\n            {\n                headers: {\n                    Authorization:\n                    'Bearer '+localStorage.getItem('token')+'',\n                },\n            })\n            this.getCollection()\n        },\n        async ToggleEchange(id, state){\n            var new_state = true\n            if(state === true){new_state = false}\n\n            console.log(id, state);\n            await http.put('collections/'+id+'', \n            {\n                \"data\":{\n                    dispo_echange: new_state,\n                }\n            },\n            {\n                headers: {\n                    Authorization:\n                    'Bearer '+localStorage.getItem('token')+'',\n                },\n            })\n            this.getCollection()\n        },\n\n        async getCollection(){\n            var userChaussure = []\n            await http.get('collections?filters[proprietaire][$eq]='+localStorage.getItem('username')+'', {\n                headers: {\n                    Authorization:\n                    'Bearer '+localStorage.getItem('token')+'',\n                },\n            })\n            .then(function (res) {\n                res.data.data.forEach( item => {\n                    var name = item.attributes.Name;\n                    var image = item.attributes.Image;\n                    var prix = item.attributes.Price;\n                    var rarity = item.attributes.Rarete\n                    var echange = item.attributes.dispo_echange\n                    var vente = item.attributes.Vente\n                    userChaussure.push({Name: name, Image : image, Price: prix, Vente: vente, ID: item.id, Rarete: rarity, Echange: echange}) \n                })\n            })\n            this.collection_size = res.data.meta.pagination.total\n            userChaussure.sort(function (a, b) {\n                return b.Price - a.Price;\n            });\n            this.chaussure = userChaussure\n        }\n\n    }\n}\n</script>\n\n<style lang=\"scss\" scopped>\n.profil{\n\n    .profil_top{\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        h1{\n            font-weight: 700;\n            font-size: 64px;\n            color: white;\n            margin: 30px 0 20px 0 ;\n        }\n        input{\n            color: #C7C7C7;\n            width: 30%;\n            padding: 10px 0;\n            outline: none;\n            background: transparent;\n            border: none;\n            font-family: 'Poppins';\n            border-bottom: solid 1px rgba(255, 255, 255, 0.35); ;\n\n        }\n    }\n    \n    .info{\n        height: 100px;\n        padding: 25px;\n        background: rgba(0, 0, 0, 0.35);\n        border-radius: 30px;\n        display: flex;\n        align-items: center;\n\n\n        div{\n            width: 50%;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 24px;\n\n            .global_jauge{\n                margin-top: 10px;\n                width: 100%;\n                height: 4px;\n                background: #1E1E1E;\n                overflow: hidden;\n                border-radius: 3px;\n\n                .personal_jauge{\n                    border-radius: 3px;\n                    height: 100%;\n                    width: 20%;\n                    background: #FF8843;\n                }\n            }\n        }\n    }\n\n    .display_card{\n        display: flex;\n        flex-wrap: wrap;\n        flex-direction: row;\n        justify-content: space-between;\n\n        .card{\n            margin: 25px 0 25px 0;\n            width: 24%;\n            // height: 360px;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            padding: 20px 0 ;\n            background: linear-gradient(0deg, rgba(0, 0, 0, 0.53) -32.96%, #141414 100%);\n            border: 1px solid rgba(255, 255, 255, 0.13);\n            border-radius: 25px;\n            align-items: center;\n            transition: all 200ms ease-out;\n\n            &:hover{\n                box-shadow: 0px 17px 50px 3px rgba(0,0,0,0.1);\n                transform: scale(1.02);\n            }\n\n            img{\n                max-width: 80%;\n            }\n\n            h2{\n                max-width: 80%;\n                font-weight: 600;\n                font-size: 20px;\n                line-height: 24px;\n                color: #FFFFFF;\n            }\n            .span_rarete{\n                margin-bottom: 25px;\n            }\n\n            .button__off{\n                background: transparent;\n                &:hover{\n                    background: #1E1E1E;;\n                    filter: none;\n                }\n            }\n        }\n    }\n    \n}\n</style>"]},"metadata":{},"sourceType":"module"}